<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>RLads Lab</title>

    <meta name="author" content="Yongfu Liao" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/header-attrs-2.7.3/header-attrs.js"></script>
    <script src="libs/jquery-3.5.1/jquery-3.5.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.2.4/tabs.js"></script>
    <script src="libs/bs3compat-0.2.4/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>

  <!-- CSS -->
    <link rel="stylesheet" href="style.css" />
    
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<!--bookdown:title:start-->
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">RLads Lab</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="dt">echo =</span> <span class="ot">TRUE</span>,<span class="dt">comment =</span> <span class="st">&#39;#&gt;&#39;</span>,<span class="dt">message =</span> F,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>    <span class="dt">out.width =</span> <span class="st">&quot;80%&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="kw">library</span>(knitr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>img &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    items =<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">list</span>(...))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>    paths =<span class="st"> </span>items</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(items)) {</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>        <span class="cf">if</span> (<span class="kw">startsWith</span>(items[i], <span class="st">&quot;http://&quot;</span>) <span class="op">|</span><span class="st"> </span><span class="kw">startsWith</span>(items[i], <span class="st">&quot;https://&quot;</span>)) paths[i] =<span class="st"> </span>items[i]</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>        <span class="cf">else</span> </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>          paths[i] =<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;assets/img/&quot;</span>, items[i])</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>    }</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>    knitr<span class="op">::</span><span class="kw">include_graphics</span>(paths)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>}</span></code></pre></div>
<div id="關於" class="section level1 unnumbered">
<h1 class="unnumbered">關於</h1>
<p><a href="https://lopentu.github.io/rlads2021">程式設計與資料科學導論</a>實習課講義</p>
<!--chapter:end:index.Rmd-->
</div>
<div id="lab01" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> 掌握你的電腦</h1>
<p><span class="course-resource">(<a href="https://docs.google.com/presentation/d/1oghUoCCDI9FWYKEjI9GlwKhevjqIu5FHi5cNWeEtFh0">投影片</a> /
<a href="https://youtu.be/MIuexkT2V4Q">影片</a>)</span></p>
<div id="路徑-工作目錄" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> 路徑 &amp; 工作目錄</h2>
<ul>
<li><p>電腦透過<strong>資料夾 (directory)</strong> 與<strong>檔案 (file)</strong> 將資訊組織起來，方便與使用者互動。資料夾裡面可以是另一個資料夾，也可以是檔案。換言之，資料夾是有<strong>階層結構</strong>的，可以一層層的包覆起來</p></li>
<li><p>在使用電腦時，我們通常是透過<strong>圖形使用者界面 (GUI)</strong> 與電腦互動。在操作檔案與資料夾時，我們通常會透過<strong>檔案管理員</strong>這類的程式 (Figure @ref(fig:foldergui))</p></li>
</ul>
<div class="figure">
<img src="assets/img/folder_gui.png" alt="Windows 與 Mac 的檔案管理界面^[MacOS's figure source: &lt;https://www.dummies.com/computers/macs/mac-operating-systems/basics-of-the-os-x-folder-structure/&gt;]" width="70%" />
<p class="caption">
(#fig:foldergui)Windows 與 Mac 的檔案管理界面<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</p>
</div>
<ul>
<li><p>對於初次接觸程式的同學，需要逐步習慣使用 <strong>Text-based user interfaces (TUI)</strong> (下圖)。透過 TUI 與電腦互動意謂著使用者(幾乎)只能使用鍵盤，也意謂著使用者需了解<strong>更多的程式指令</strong>以及<strong>電腦組織檔案與資料夾的方式</strong>。但與此同時，使用者將能<strong>更好地掌握自己的電腦</strong><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p><img src="assets/img/console.png" width="80%" /></p></li>
</ul>
<div id="目錄結構-directory-structure" class="section level3" number="1.1.1">
<h3 number="1.1.1"><span class="header-section-number">1.1.1</span> 目錄結構 (Directory structure)</h3>
<ul>
<li><p>為方便理解電腦裡面的資料夾與檔案結構 (簡稱目錄結構)，我們通常會以<strong>樹狀結構</strong>去表示目錄結構。Figure @ref(fig:dirstruct) 是 Windows 以及 Mac 上的目錄結構圖</p></li>
<li><p>在樹狀圖中，越上方的資料夾階層越高。最上方的資料夾稱為<strong>根目錄 (root)</strong>，電腦中的<strong>所有其它資料夾與檔案</strong>皆位於<strong>根目錄</strong>之內<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p></li>
</ul>
<div class="figure">
<img src="assets/img/directory_structure.png" alt="目錄結構" width="100%" />
<p class="caption">
(#fig:dirstruct)目錄結構
</p>
</div>
<ul>
<li>以 Figure @ref(fig:dirstruct) 為例，
<ul>
<li>Windows 的根目錄 <code>C:</code> 裡有 3 個資料夾 <code>temp</code>, <code>Users</code>, 以及 <code>Windows</code>，其中的 <code>Users</code> 之下又有 3 個資料夾 <code>Tiger</code>, <code>Pooh</code> 與 <code>Piglet</code></li>
<li>Mac 的根目錄以 <code>/</code> 表示，裡面有 3 個資料夾 <code>Library</code>, <code>Users</code> 以及 <code>System</code>。<code>Users</code> 之下有 <code>Tiger</code>, <code>Pooh</code> 與 <code>Piglet</code> 3 個資料夾</li>
</ul></li>
</ul>
</div>
<div id="路徑-path" class="section level3" number="1.1.2">
<h3 number="1.1.2"><span class="header-section-number">1.1.2</span> 路徑 (Path)</h3>
<p>使用 <strong>Text-based user interfaces (TUI)</strong> 與電腦互動時，需要一套用來描述<strong>路徑 (Path)</strong> (亦即, 某個資料夾或檔案位於電腦上的哪個位置) 的語法。這套語法基本上就是在告訴電腦「如何從 <strong>A 資料夾</strong>『走到』目標資料夾 (或檔案)」</p>
<div id="絕對路徑" class="section level4" number="1.1.2.1">
<h4 number="1.1.2.1"><span class="header-section-number">1.1.2.1</span> 絕對路徑</h4>
<p><strong>絕對路徑</strong>就是在告訴電腦「如何從<strong>根目錄 (root)</strong>走到目標資料夾 (或檔案)」</p>
<ul>
<li><code>/</code> 在描述路徑時具有 <strong>2 種</strong>語意：
<ol style="list-style-type: decimal">
<li>若 <code>/</code> 出現在<strong>路徑的起始</strong> (e.g., <code>/Users</code>)，則其代表的是<strong>根目錄</strong> (Windows 的 <code>C:</code> 以及 Mac 的 <code>/</code>)</li>
<li>若 <code>/</code> 出現在 <strong>路徑的中間</strong> (e.g., <code>C:/Users/Pooh</code>)，則是作為<strong>母 (Parent) 子 (Child) 資料夾</strong>之間的分隔符號</li>
</ol></li>
<li>舉例來說，
<ol style="list-style-type: decimal">
<li>若要告訴電腦<strong>根目錄</strong>的位置，只須輸入根目錄的名稱：
<ul>
<li><code>C:</code> (Windows)<br />
<code>/</code> (Mac)</li>
</ul></li>
<li>若要告訴電腦 <code>Tiger</code> 的位置，則可以在根目錄後面依序輸入 <code>Users</code> 與 <code>Tiger</code>，並使用 <code>/</code> 作為資料夾間的分隔線：
<ul>
<li><code>C:/Users/Tiger</code> (Windows)<br />
<code>/Users/Tiger</code> (Mac)</li>
</ul></li>
</ol></li>
</ul>
<p><img src="assets/img/abs_path.png" width="47%" /><img src="assets/img/abs_path2.png" width="52%" /></p>
<div class="hands-on" data-title="Terminal 101">
<p>現在是時候打開<strong>終端機 (Terminal)</strong> 玩玩看了 (解鎖你電腦的 1 號隱藏功能)。</p>
<div id="windows" class="section level3 unnumbered">
<h3 class="unnumbered">Windows</h3>
<ol style="list-style-type: decimal">
<li><p>按下 Windows 鍵 <code>⊞</code> 搜尋：<code>cmd</code> 打開「命令提示字元」</p></li>
<li><p>在跳出來的黑黑的視窗輸入 <code>cd</code>，此時應會印出一個絕對路徑<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>：</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>C:\Users\{username}</span></code></pre></div>
<p>這個路徑包含 3 個資料夾 <code>C:</code>, <code>Users</code> 以及 <code>{username}</code>，其中 <code>{username}</code> 是你登入電腦的使用者名稱</p></li>
</ol>
</div>
<div id="mac" class="section level3 unnumbered">
<h3 class="unnumbered">Mac</h3>
<ol style="list-style-type: decimal">
<li><p>在 Finder 搜尋 <code>Terminal</code> 或 <code>終端機</code></p></li>
<li><p>在跳出來的黑黑的視窗輸入 <code>pwd</code>，此時應會印出一個絕對路徑</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="ex">/Users</span>/<span class="dt">{username}</span></span></code></pre></div>
<p>這個路徑包含 3 個資料夾 <code>/</code>, <code>Users</code> 以及 <code>{username}</code>，其中 <code>{username}</code> 是你登入電腦的使用者名稱</p></li>
</ol>
</div>
<div id="工作目錄-working-directory" class="section level3 unnumbered">
<h3 class="unnumbered">工作目錄 (Working Directory)</h3>
<p>這個出現在終端機上的絕對路徑即是<strong>目前終端機程式的工作目錄</strong>。所以到底什麼是工作目錄？</p>
<p>由於程式 (e.g., 終端機, R, Python, Chrome, …) 運行時需要與電腦進行互動，換言之，它們經常需要讀取、修改、刪除與寫入檔案與資料夾，但同時又<strong>不需要知道電腦上完整的目錄結構</strong>，因此它們需要有一個參照用的資料夾，以此資料夾作為<strong>描述路徑的基準</strong>。這個參照的資料夾就如同執行中的程式<strong>工作的地方</strong>，因此稱為工作目錄；而用來描述<strong>相對於工作目錄的路徑</strong>則稱為<strong>相對路徑</strong>。</p>
<p>而上面 <code>C:\Users\{username}</code> (Windows) 與 <code>/Users/{username}</code> (Mac) 這兩個路徑， 即是終端機開啟時<strong>預設的工作目錄</strong>。下方介紹完相對路徑後，接著會告訴大家<strong>如何更改工作目錄</strong>。</p>
</div>
</div>
</div>
<div id="相對路徑" class="section level4" number="1.1.2.2">
<h4 number="1.1.2.2"><span class="header-section-number">1.1.2.2</span> 相對路徑</h4>
<p><strong>相對路徑</strong>就是在告訴電腦「如何從<strong>工作目錄 (working directory)</strong> 走到目標資料夾 (或檔案)」。以下方的目錄結構為例 (工作目錄設在 <code>/Users/Pooh</code>)，</p>
<div class="figure" style="text-align: center">
<img src="assets/img/relative_path.png" alt="範例目錄結構。在此例中，工作目錄設置在 `Pooh`" width="33%" />
<p class="caption">
(#fig:relativepath)範例目錄結構。在此例中，工作目錄設置在 <code>Pooh</code>
</p>
</div>
<ul>
<li><p><code>.</code> 表示的是「當前」的目錄，所以若其出現在路徑的<strong>開頭</strong>，即是指工作目錄<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>。所以透過相對路徑表示工作目錄非常簡短：</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="ex">.</span></span></code></pre></div></li>
<li><p>若要表示工作目錄之下的檔案或資料夾，例如 <code>Desktop</code>，其相對路徑即為其名稱：</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="ex">Desktop</span></span></code></pre></div>
<p>或是，也可以在透過 <code>.</code> 表示當前目錄之後，再於後方加入檔案或資料夾的名稱：</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="ex">./Desktop</span></span></code></pre></div></li>
<li><p>依此類推，工作目錄下面<strong>兩個階層</strong>的檔案或資料夾 (例如，<code>i.txt</code>) 的相對路徑為：</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="ex">Desktop/i.txt</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="ex">./Desktop/i.txt</span></span></code></pre></div></li>
<li><p><code>..</code> 則讓我們可以<strong>往上</strong>走。例如，若想表示工作目錄的母資料夾 <code>Users</code>，可以使用 <code>..</code>：</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="ex">..</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="ex">./..</span></span></code></pre></div></li>
<li><p>這讓我們可以很方便地表示工作目錄的「<strong>姊妹</strong>」資料夾 <code>Tiger</code> (它們共同的母資料夾是 <code>Users</code>)：</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="ex">../Tiger</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="ex">./../Tiger</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="assets/img/relative_path2.png" alt="透過相對路徑表示「姊妹」的資料夾" width="33%" />
<p class="caption">
(#fig:relativepath2)透過相對路徑表示「姊妹」的資料夾
</p>
</div></li>
<li><p>同理，若要表達 <code>Tiger</code> 之下的 <code>he.txt</code>，只需在原本的路徑之後加入檔名：</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="ex">../Tiger/he.txt</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a><span class="ex">./../Tiger/he.txt</span></span></code></pre></div></li>
</ul>
<div class="hands-on" data-title="Terminal 202">
<p>透過終端機更改工作目錄的指令很簡單：<code>cd</code> (“change directory”) + 絕對/相對路徑<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>。所以假設想將 Figure @ref(fig:relativepath2) 中的工作目錄 <code>Pooh</code> 更改成 <code>Tiger</code>，只要輸入：</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="bu">cd</span> ../Tiger</span></code></pre></div>
<p>或</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="bu">cd</span> /Users/Tiger</span></code></pre></div>
<div id="windows-路徑中的反斜線" class="section level3 unnumbered">
<h3 class="unnumbered">Windows 路徑中的反斜線 (<code>\</code>)</h3>
<p>Windows 系統上的路徑使用的是反斜線 <code>\</code> 作為分隔符號，與其它系統 (Mac, Linux 等) 以及各種程式語言 (R, Python 等) 使用的 <code>/</code> 不同。但近年的 Windows 系統已讓使用者能輸入 <code>/</code> 作為路徑中的分隔<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>。由於反斜線 <code>\</code> 在許多程式語言中常具有特殊的功能，這邊強烈建議大家<strong>路徑中不要使用反斜線 <code>\</code></strong>，請使用 <code>/</code>。這麼做的好處之一，是讓你撰寫的程式可以同時在 Windows 以及其它系統上運行<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>。</p>
</div>
</div>
</div>
</div>
</div>
<div id="r-101" class="section level2" number="1.2">
<h2 number="1.2"><span class="header-section-number">1.2</span> R 101</h2>
<p>現在我們已經知道如何操作終端機了。接下來，我們就可以透過終端機執行我們的第一支 R 程式：</p>
<ol style="list-style-type: decimal">
<li><p>透過文字編輯器<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>新增一份純文字檔，將檔案命名為 <code>hello.R</code>。<code>hello.R</code> 內請寫下：</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="kw">print</span>(<span class="st">&quot;Hello World!&quot;</span>)</span></code></pre></div></li>
<li><p>打開終端機，<code>cd</code> 到 <code>hello.R</code> 所在的資料夾 (e.g., <code>C:/Users/Tiger/Desktop</code>)，再執行 <code>Rscript hello.R</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="bu">cd</span> ./Desktop</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="ex">Rscript</span> hello.R</span></code></pre></div></li>
<li><p>這時，你應該會看到終端機裡印出：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>[1] &quot;Hello World!&quot;</span></code></pre></div></li>
</ol>
<div class="hands-on" data-title="R 101">
<p>試著修改 <code>hello.R</code> 的內容，然後重複執行 <code>Rscript hello.R</code>，看看輸出指令如何改變。你可以嘗試以下的指令：</p>
<ul>
<li><code>print("Hi")</code></li>
<li><code>(2 + 7) / 10</code></li>
<li><code>2 ^ 3</code></li>
<li><code>1:4</code></li>
</ul>
<p>在 <code>hello.R</code> 裡面，你可以輸入不只一條指令，但注意，每一條指令需佔<strong>獨立的一行</strong>。例如，若要輸入三條指令，<code>hello.R</code> 的樣子會類似：</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="kw">print</span>(<span class="st">&quot;Hello world&quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a><span class="kw">print</span>(<span class="st">&quot;Hi&quot;</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a>(<span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">7</span>) <span class="op">/</span><span class="st"> </span><span class="dv">10</span></span></code></pre></div>
</div>
<div id="r-script" class="section level3" number="1.2.1">
<h3 number="1.2.1"><span class="header-section-number">1.2.1</span> R Script</h3>
<p><code>hello.R</code> 這類用來撰寫程式的純文字檔稱為 <strong>R script</strong> (而執行 R Script 裡程式的指令為 <code>Rscript</code>)。在 R script 中，程式碼是由上至下執行，所以上面的例子</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a><span class="kw">print</span>(<span class="st">&quot;Hello world&quot;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a><span class="kw">print</span>(<span class="st">&quot;Hi&quot;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a>(<span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">7</span>) <span class="op">/</span><span class="st"> </span><span class="dv">10</span></span></code></pre></div>
<p>執行後會依序印出這三行的執行結果：</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>[1] &quot;Hello World!&quot;</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a>[1] &quot;Hi&quot;</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a>[1] 0.9</span></code></pre></div>
</div>
<div id="回傳值" class="section level3" number="1.2.2">
<h3 number="1.2.2"><span class="header-section-number">1.2.2</span> 回傳值</h3>
<ul>
<li><p>在上方的例子中，印出的執行結果前面皆有一個 <code>[1]</code>。這個 <code>[1]</code> 的目的是為了方便使用者知道指令執行的結果 (回傳值) 的「位置」。事實上，R 印出回傳值的形式是：<code>[&lt;num&gt;] &lt;value(s)&gt;</code>：</p>
<ul>
<li><code>&lt;value(s)&gt;</code> 是指令所傳回來的值 (可有一個以上)，e.g. <code>1</code> or <code>1 2 3 4</code> or <code>"a" "b" "c" "d"</code></li>
<li>而 <code>[&lt;num&gt;]</code> 則是一個指標 (位於每橫列的開頭)，用來指示其<strong>右邊第一個值</strong>在所有的值之中的排序，e.g. <code>[1] 11 12 13</code> 代表 <code>11</code> 是第 1 個數值、<code>12</code> 是第 2 個數值；若第一行不足以印出所有的值，則會接著印出第二行: 例如 <code>[16] 26 27 28</code> 代表 <code>26</code> 是第 16 個。</li>
</ul></li>
<li><p>例如，執行 <code>1:50</code> 會回傳 50 個值 (1~50)。因為終端機一行無法顯示全部的值，它便會將結果用多行 (行數每台電腦可能不同) 顯示，並透過 <code>[&lt;num&gt;]</code> 方便使用者知道目前印到哪一個值：</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="dv">1</span><span class="op">:</span><span class="dv">50</span></span></code></pre></div>
<pre><code>#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
#&gt; [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</code></pre></li>
</ul>
</div>
<div id="變數指派-assignment" class="section level3" number="1.2.3">
<h3 number="1.2.3"><span class="header-section-number">1.2.3</span> 變數指派 (Assignment)</h3>
<p>要將指令的回傳值儲存起來，需要使用 <code>&lt;-</code> (assignment operator)，將 <code>&lt;-</code> 右邊的程式碼<strong>執行後所回傳的數值</strong>儲存於 <code>&lt;-</code> 左邊的變數</p>
<p>例如，我可以先將 <code>2 * 3 + 4</code> 的運算結果儲存在 <code>x</code> 內：</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">4</span></span></code></pre></div>
<p>之後，我可以輸入 <code>x</code> 直接取用上次運算的結果：</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 10</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span>  <span class="co"># 用 x 內的值進一步運算</span></span></code></pre></div>
<pre><code>#&gt; [1] 11</code></pre>
</div>
<div id="r-內建函數" class="section level3" number="1.2.4">
<h3 number="1.2.4"><span class="header-section-number">1.2.4</span> R 內建函數</h3>
<ul>
<li><p>R 裡面的函數就像是我們國高中數學課學到的「函數」。</p>
<ul>
<li>R 的函數 (通常) 會有一個或多個「輸入值」，稱為「引數 (argument)」；並且在運算完成後，一定會丟出一個「回傳值」</li>
</ul></li>
<li><p><code>sqrt()</code> 是一個函數，它會將輸入值 (在圓括號內) 開根號後回傳</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="kw">sqrt</span>(<span class="dv">16</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre></li>
<li><p>函數裡面可以放入另一個函數 (e.g. <code>sqrt(sqrt(16))</code>)，其運算的次序是<strong>由內而外</strong>，先執行最內部的函數，取得回傳值後，再將此回傳值作為外面的函數的輸入值</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a><span class="kw">sqrt</span>(<span class="kw">sqrt</span>(<span class="dv">16</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<p>概念上等同於：</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a>inner &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">16</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a><span class="kw">sqrt</span>(inner)</span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre></li>
</ul>
</div>
<div id="r-console" class="section level3" number="1.2.5">
<h3 number="1.2.5"><span class="header-section-number">1.2.5</span> R Console</h3>
<ul>
<li>寫程式時，每次修改都要透過 <code>Rscript</code> 指令檢視執行結果有點麻煩，特別是當你只是在<strong>測試</strong>或是只想看<strong>某一行指令的輸出結果</strong>時。因此在撰寫程式時，我們通常會
<ol style="list-style-type: decimal">
<li>先將指令<strong>寫在 R Console</strong> 測試</li>
<li>確認執行結果沒問題後再<strong>將指令複製到 R Script</strong></li>
<li>寫完完整的一段程式碼再透過終端機<strong>執行整個 R Script</strong></li>
</ol></li>
<li>在終端機裡面輸入 <code>R</code> 即可打開 R Console。</li>
<li>R Console 是互動式的，意思是輸入一行指令後，可以馬上看到指令執行的結果，並且還可以繼續執行其它指令 (過程中若有指派變數，結果也會記錄下來)。</li>
</ul>
<div class="figure">
<img src="assets/img/3-tools.png" alt="寫 R 必備的 3 樣工具" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-8)寫 R 必備的 3 樣工具
</p>
</div>
</div>
<div id="說明文件-r-help-page" class="section level3" number="1.2.6">
<h3 number="1.2.6"><span class="header-section-number">1.2.6</span> 說明文件 (R Help Page)</h3>
<ul>
<li><p>不確定如何使用函數時，可以閱讀該函數的說明文件：</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a><span class="co"># ?&lt;function_name&gt;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a>?log</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true"></a><span class="co"># ?`&lt;function_name&gt;`: for special functions (e.g. binary operators)</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true"></a>?<span class="st">`</span><span class="dt">+</span><span class="st">`</span></span></code></pre></div></li>
</ul>
<div class="figure">
<img src="assets/img/help-page.png" alt="說明文件結構。建議閱讀步驟：`Description` &gt; `Usage` &gt; `Arguments` &gt; `Value` &gt; `Examples` &gt; `Details`" width="100%" />
<p class="caption">
(#fig:unnamed-chunk-9)說明文件結構。建議閱讀步驟：<code>Description</code> &gt; <code>Usage</code> &gt; <code>Arguments</code> &gt; <code>Value</code> &gt; <code>Examples</code> &gt; <code>Details</code>
</p>
</div>
<!--chapter:end:01-paths_workingDir_R101.Rmd-->
</div>
</div>
</div>
<div id="lab02" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Base R (I) &amp; 輔助工具</h1>
<p><span class="course-resource">(<a href="https://docs.google.com/presentation/d/1b01Vx-uTr2DQ1t2FKFFDiPzw7LlI-srYMqXIPWKQC_Q">投影片</a> /
<a href="https://youtu.be/WV18389Op8s">影片</a>)</span></p>
<div id="r-studio" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> R Studio</h2>
<div id="自訂樣式" class="section level3" number="2.1.1">
<h3 number="2.1.1"><span class="header-section-number">2.1.1</span> 自訂樣式</h3>
<ul>
<li>RStudio 預設有 4 個區塊 (Pane)。你可以自行決定這 4 個區塊的位置
<ul>
<li><code>Tools</code> –&gt; <code>Global Options...</code> –&gt; (在左欄選擇) <code>Pane Layout</code></li>
<li>Source, Console, 及 2 個自訂區塊</li>
</ul></li>
<li>除了區塊的相對位置，也可以設定 RStudio 整體的風格以及程式碼 Syntax Highlighting 的樣式:
<ul>
<li><code>Tools</code> –&gt; <code>Global Options...</code> –&gt; (在左欄選擇) <code>Appearance</code></li>
</ul></li>
</ul>
</div>
<div id="編輯器設定" class="section level3" number="2.1.2">
<h3 number="2.1.2"><span class="header-section-number">2.1.2</span> 編輯器設定</h3>
<ul>
<li>Source Pane 是撰寫程式碼的地方 (文字編輯器)
<ul>
<li><p>縮排間距：建議使用 space (而非 tab) 作為縮排字元</p>
<ul>
<li><code>Tools</code> –&gt; <code>Global Options...</code> –&gt; (在左欄選擇) <code>Code</code> –&gt; (在上方選擇) <code>Editing</code> –&gt; 勾選 <code>Insert spaces for tab</code></li>
</ul></li>
<li><p>文字編碼：由於中文字在各作業系統上會有編碼不一致的問題，請<strong>務必</strong>將編碼設定為 <code>UTF-8</code></p>
<ul>
<li><code>Tools</code> –&gt; <code>Global Options...</code> –&gt; (在左欄選擇) <code>Code</code> –&gt; (在上方選擇) <code>Saving</code> –&gt; <code>Default text encoding</code></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="工作目錄" class="section level3" number="2.1.3">
<h3 number="2.1.3"><span class="header-section-number">2.1.3</span> 工作目錄</h3>
<ul>
<li><p>使用 RStudio 時，最好養成要馬上設置「工作目錄」的習慣。</p></li>
<li><p>RStudio 所在的「工作目錄」顯示於 Console Pane 的標籤下方 (e.g. <code>~/</code>)</p></li>
<li><p>工作目錄的設置方式</p>
<ul>
<li><p>RStudio 功能選單: <code>Sessions</code> &gt; <code>Set Working Directory...</code><br />
</p></li>
<li><p>Console</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="kw">setwd</span>(<span class="st">&#39;~/Desktop/week2&#39;</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true"></a><span class="co"># setwd(&#39;&lt;path/to/new_working_dir&gt;&#39;)</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true"></a><span class="kw">getwd</span>()  <span class="co"># show current directory</span></span></code></pre></div></li>
</ul></li>
</ul>
</div>
</div>
<div id="函數" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> 函數</h2>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true"></a>get_area &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true"></a>    area &lt;-<span class="st"> </span><span class="fl">3.14</span> <span class="op">*</span><span class="st"> </span><span class="dv">1</span> <span class="op">*</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true"></a>    <span class="kw">return</span>(area)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true"></a>}</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true"></a><span class="kw">get_area</span>()</span></code></pre></div>
<pre><code>#&gt; [1] 3.14</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true"></a><span class="co"># Function with a argument</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true"></a>get_area &lt;-<span class="st"> </span><span class="cf">function</span>(r) {</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true"></a>    area &lt;-<span class="st"> </span><span class="fl">3.14</span> <span class="op">*</span><span class="st"> </span>r <span class="op">*</span><span class="st"> </span>r</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true"></a>    <span class="kw">return</span>(area)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true"></a>}</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true"></a><span class="kw">get_area</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 12.56</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true"></a><span class="co"># Function with a argument that has default value</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true"></a>get_area &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">r =</span> <span class="dv">1</span>) {</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true"></a>    area &lt;-<span class="st"> </span><span class="fl">3.14</span> <span class="op">*</span><span class="st"> </span>r <span class="op">*</span><span class="st"> </span>r</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true"></a>    <span class="kw">return</span>(area)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true"></a>}</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true"></a><span class="kw">get_area</span>()</span></code></pre></div>
<pre><code>#&gt; [1] 3.14</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true"></a>get_area &lt;-<span class="st"> </span><span class="cf">function</span>(r) {</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true"></a>    area &lt;-<span class="st"> </span><span class="fl">3.14</span> <span class="op">*</span><span class="st"> </span>r <span class="op">*</span><span class="st"> </span>r</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true"></a>    <span class="kw">return</span>(area)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true"></a>}</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true"></a>area &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true"></a>area</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true"></a><span class="kw">get_area</span>(<span class="dv">1</span>)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true"></a>area</span></code></pre></div>
<pre><code>#&gt; [1] 100
#&gt; [1] 3.14
#&gt; [1] 100</code></pre>
</div>
<div id="function-arguments" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> Function Arguments</h2>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true"></a>vol &lt;-<span class="st"> </span><span class="cf">function</span>(r, <span class="dt">height =</span> <span class="dv">1</span>) {</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true"></a>    volumn &lt;-<span class="st"> </span><span class="fl">3.14</span> <span class="op">*</span><span class="st"> </span>r <span class="op">*</span><span class="st"> </span>r <span class="op">*</span><span class="st"> </span>height</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true"></a>    <span class="kw">return</span>(volumn)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true"></a>}</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true"></a><span class="kw">vol</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 6.28</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true"></a><span class="kw">vol</span>(<span class="dt">r =</span> <span class="dv">1</span>, <span class="dt">height =</span> <span class="dv">2</span>)  <span class="co"># Be explicit</span></span></code></pre></div>
<pre><code>#&gt; [1] 6.28</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true"></a><span class="co"># If all args are named, order doesn&#39;t matter</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true"></a><span class="kw">vol</span>(<span class="dt">height =</span> <span class="dv">2</span>, <span class="dt">r =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 6.28</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true"></a><span class="co"># Mix named and unnamed args:</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true"></a><span class="co"># named args will be assigned first, then</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true"></a><span class="co"># unnamed args will be assigned </span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true"></a><span class="co"># based on their positions</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true"></a><span class="kw">vol</span>(<span class="dt">height =</span> <span class="dv">2</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 6.28</code></pre>
</div>
<div id="vector" class="section level2" number="2.4">
<h2 number="2.4"><span class="header-section-number">2.4</span> vector</h2>
<ul>
<li><p>上週實習課使用 R 時，指令的回傳值多半只有「一個」。但 R 其實是一種以<strong>向量</strong>作為基本單位的程式語言，所以對於「一個回傳值」更精確的描述應該是「一個<strong>長度為 1</strong> 的向量」。</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true"></a><span class="kw">is.vector</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true"></a><span class="kw">length</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre></li>
<li><p>我們上週簡短提過以 <code>:</code> 製造數列的方式 (e.g. <code>1:10</code>)。事實上，這個回傳的數列即是一個 vector。另外，由於這個 vector 的每個元素皆是整數，因此這個 vector 屬於 integer vector。我們可以使用 <code>typeof()</code> 確認 vector 的類別</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true"></a><span class="kw">typeof</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre></li>
<li><p>R 裡面的 vector 可以被分成 6 種類別，其中常見的 4 種分別為 <code>integer</code>, <code>double</code>, , <code>character</code>, <code>logical</code></p></li>
</ul>
<div id="integer-vector" class="section level3" number="2.4.1">
<h3 number="2.4.1"><span class="header-section-number">2.4.1</span> integer vector</h3>
<ul>
<li>integer vector 的元素由整數組成，它可以是零、正或負的。除了使用 <code>:</code> 製造數列，也可以使用 <code>c()</code> (稱為 concatenate) 組出任意序列的 vector。
<ul>
<li>使用 <code>c()</code> 製造 integer vector 時，每個整數數字後面必須接 <code>L</code>，若沒有加上 <code>L</code>， R 會將製造出來的 vector 視為 double vector。</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true"></a>int_vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span>1L, 5L, 2L)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true"></a>dbl_vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true"></a>int_vec</span></code></pre></div>
<pre><code>#&gt; [1] -1  5  2</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true"></a>dbl_vec</span></code></pre></div>
<pre><code>#&gt; [1] -1  5  2</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true"></a><span class="kw">typeof</span>(int_vec)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true"></a><span class="kw">typeof</span>(dbl_vec)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
</div>
<div id="double-vector" class="section level3" number="2.4.2">
<h3 number="2.4.2"><span class="header-section-number">2.4.2</span> double vector</h3>
<ul>
<li><p>double vector 儲存的是<a href="https://zh.wikipedia.org/wiki/%E6%B5%AE%E7%82%B9%E6%95%B0">浮點數</a>，亦即含有小數點的數字 (e.g <code>1.2</code>, <code>-0.75</code>)</p></li>
<li><p>在 R 裡面，integer vector 與 double vector 合稱為 numeric vector，兩者之間的區隔通常也不太重要，因為 R 在運算時，通常會將這兩種資料類型自動轉換成合適的類型</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true"></a><span class="kw">typeof</span>(2L)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true"></a><span class="kw">typeof</span>(<span class="fl">2.0</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true"></a><span class="kw">is.numeric</span>(2L)</span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true"></a><span class="kw">is.numeric</span>(<span class="fl">2.0</span>)</span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true"></a><span class="kw">typeof</span>(1L <span class="op">+</span><span class="st"> </span><span class="fl">1.0</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true"></a><span class="kw">typeof</span>(1L <span class="op">/</span><span class="st"> </span>2L)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre></li>
<li><p>Special values:</p>
<ul>
<li><p><code>Inf</code>: 代表無限大</p></li>
<li><p><code>NaN</code>: “Not a Number”，常見於數字運算不符數學定義時，例如：</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true"></a><span class="dv">0</span> <span class="op">/</span><span class="st"> </span><span class="dv">0</span></span></code></pre></div>
<pre><code>#&gt; [1] NaN</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true"></a><span class="ot">Inf</span> <span class="op">/</span><span class="st"> </span><span class="ot">Inf</span></span></code></pre></div>
<pre><code>#&gt; [1] NaN</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true"></a><span class="kw">log</span>(<span class="op">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; Warning in log(-1): NaNs produced</code></pre>
<pre><code>#&gt; [1] NaN</code></pre></li>
</ul></li>
</ul>
</div>
<div id="character-vector" class="section level3" number="2.4.3">
<h3 number="2.4.3"><span class="header-section-number">2.4.3</span> character vector</h3>
<ul>
<li><p>除了數字以外，R 也可以儲存<strong>字串 (string)</strong>。character vector 的每個元素皆由一個字串所組成。在 R 裡面，只要是被引號 (quote, <code>'</code> 或 <code>"</code> 皆可) 包裹的東西就是字串，放在引號內的可以是任何字元 (e.g. 空白、數字、中文字、英文字母)</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true"></a><span class="st">&quot;1.1&quot;</span>  <span class="co"># This is a string (character vector of length 1), not double</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;1.1&quot;</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true"></a><span class="st">&quot;你好！&quot;</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;你好！&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true"></a><span class="kw">c</span>(<span class="st">&quot;1.1&quot;</span>, <span class="st">&quot;你好！&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;1.1&quot;    &quot;你好！&quot;</code></pre></li>
<li><p>如果字串內含有引號 <code>"</code>，需在字串內的引號前使用跳脫字元 <code>\</code>，以表示此引號是字串的一部分而非字串的開頭或結尾</p>
<ul>
<li>或是，你可以使用「不同的」引號。例如以「單引號」表示字串的開頭與結尾時，字串內就可以直接使用「雙引號」，反之亦然</li>
</ul>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true"></a><span class="st">&quot;</span><span class="ch">\&quot;</span><span class="st">&quot;</span>  <span class="co"># escape a double quote</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true"></a><span class="st">&#39;</span><span class="ch">\&#39;</span><span class="st">&#39;</span>  <span class="co"># escape a single quote</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true"></a><span class="st">&#39;&quot;&#39;</span>   <span class="co"># a double quote as string without escaping</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true"></a><span class="st">&quot;&#39;&quot;</span>   <span class="co"># a single quote as string without escaping</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;\&quot;&quot;
#&gt; [1] &quot;&#39;&quot;
#&gt; [1] &quot;\&quot;&quot;
#&gt; [1] &quot;&#39;&quot;</code></pre></li>
</ul>
</div>
<div id="logical-vector" class="section level3" number="2.4.4">
<h3 number="2.4.4"><span class="header-section-number">2.4.4</span> logical vector</h3>
<ul>
<li><p>logical vector 的每個元素由 <code>TRUE</code> 或 <code>FALSE</code> 組成。</p></li>
<li><p>可以使用 <code>c()</code> 一項項手動輸入製造 logical vector</p></li>
<li><p>logical vector 的另一個來源則是 logical test 的回傳值：</p>
<ul>
<li>logical operators: <code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>%in%</code></li>
</ul>
<p><img src="https://img.yongfu.name/rlads/logical-operators.png" width="80%" /></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true"></a>vec1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true"></a>vec2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true"></a><span class="co"># logical tests</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true"></a>vec1 <span class="op">&gt;</span><span class="st"> </span>vec2</span></code></pre></div>
<pre><code>#&gt; [1] FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true"></a>vec1 <span class="op">&lt;</span><span class="st"> </span>vec2</span></code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true"></a>vec1 <span class="op">==</span><span class="st"> </span>vec2</span></code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE FALSE</code></pre></li>
<li><p>boolean operators (<code>&amp;</code>, <code>|</code>, <code>!</code>, <code>any()</code>, <code>all()</code>) 可以整合<strong>多個</strong> logical tests</p>
<p><img src="https://img.yongfu.name/rlads/boolean-operators.png" width="80%" /></p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true"></a><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">TRUE</span></span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true"></a><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">FALSE</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true"></a><span class="ot">TRUE</span> <span class="op">|</span><span class="st"> </span><span class="ot">FALSE</span></span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true"></a><span class="op">!</span><span class="ot">TRUE</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true"></a>(<span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">&amp;</span><span class="st"> </span>(<span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre></li>
</ul>
</div>
<div id="na" class="section level3" number="2.4.5">
<h3 number="2.4.5"><span class="header-section-number">2.4.5</span> NA</h3>
<ul>
<li><p><code>NA</code> 代表的是「缺失值」，可以作為任何一種 vector 裡面的元素。當 <code>NA</code> 出現在 vector 中，函數對於 vector 的運算常會出現令人意外的結果:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true"></a><span class="dv">10</span> <span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true"></a><span class="ot">NA</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true"></a>vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true"></a><span class="kw">mean</span>(vec)</span></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true"></a><span class="kw">mean</span>(vec, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre></li>
</ul>
</div>
</div>
<div id="recycling" class="section level2" number="2.5">
<h2 number="2.5"><span class="header-section-number">2.5</span> Recycling</h2>
<ul>
<li>兩個或兩個以上的 vector 進行運算時，通常是以 <strong>element-wise</strong> 的方式進行。此時，若進行運算的 vector 長度不相同，例如，<code>c(1, 2, 3) + 2</code>， R 會自動將長度較短 vector (<code>2</code>) 「回收 (recycle)」，亦即，重複此向量內的元素使其「拉長」到與另一個 vector 等長；接著再將兩個一樣長的 vector 進行 element-wise 的向量運算。</li>
</ul>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true"></a></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true"></a><span class="co"># Arithmetic operation</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true"></a>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span>  <span class="co"># equivalent to...</span></span></code></pre></div>
<pre><code>#&gt; [1] 3 3 4 4</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true"></a>x <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 3 3 4 4</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true"></a><span class="co"># Logical operation</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true"></a>x <span class="op">==</span><span class="st"> </span><span class="dv">2</span>  <span class="co"># equivalent to...</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true"></a>x <span class="op">==</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true"></a><span class="co"># String operation</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true"></a>long &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true"></a>short &lt;-<span class="st"> &quot;1&quot;</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true"></a><span class="kw">paste0</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;1&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a1&quot;</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true"></a><span class="kw">paste0</span>(long, short)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a1&quot; &quot;b1&quot; &quot;c1&quot;</code></pre>
</div>
<div id="coercion" class="section level2" number="2.6">
<h2 number="2.6"><span class="header-section-number">2.6</span> Coercion</h2>
<ul>
<li><p>vector 內的每個元素，其資料類型 (data type) 必須相同。資料類型即是前面提到的 <code>integer</code>, <code>double</code>, <code>character</code>, <code>logical</code>。</p></li>
<li><p>若發生資料類型不一致的情形 (e.g. 將不同資料類型的元素放入 <code>c()</code>)，R 會根據某些<strong>規則</strong>，<strong>自動</strong>進行資料類型的轉換。這個過程在 R 裡面稱為 Coercion</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true"></a><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="dv">3</span>)      <span class="co"># logical &amp; numeric</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 0 3</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true"></a><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="st">&quot;aa&quot;</span>)            <span class="co"># numeric &amp; character</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;-1&quot; &quot;aa&quot;</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true"></a><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="st">&quot;hi!&quot;</span>)  <span class="co"># logical &amp; character</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;FALSE&quot; &quot;TRUE&quot;  &quot;hi!&quot;</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true"></a><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="dv">0</span>, <span class="st">&quot;hi!&quot;</span>)      <span class="co"># logical &amp; numeric &amp; character</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;TRUE&quot; &quot;0&quot;    &quot;hi!&quot;</code></pre></li>
</ul>
<div class="figure">
<img src="https://img.yongfu.name/rlads/coercion.png" alt="Rules of Coercion" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-31)Rules of Coercion
</p>
</div>
<ul>
<li><p>if coercion failed, throw error</p></li>
<li><p>manual coercion: <code>as.character()</code>, <code>as.logical()</code>, <code>as.numeric()</code></p></li>
</ul>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true"></a><span class="kw">sum</span>(<span class="kw">c</span>(T, T, T, F))</span></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true"></a>gender &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true"></a><span class="kw">sum</span>(gender <span class="op">==</span><span class="st"> &quot;male&quot;</span>)  <span class="co"># num of male</span></span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true"></a><span class="kw">mean</span>(gender <span class="op">==</span><span class="st"> &quot;male&quot;</span>)  <span class="co"># proportion of male</span></span></code></pre></div>
<pre><code>#&gt; [1] 0.5</code></pre>
</div>
<div id="subsetting-a-vector" class="section level2" number="2.7">
<h2 number="2.7"><span class="header-section-number">2.7</span> Subsetting a vector</h2>
<ul>
<li>有 3 種方法可用於取出 vector 裡面的元素 (回傳一個新的 vector)
<ol style="list-style-type: decimal">
<li>透過提供 vector 中元素的位置次序 (index)</li>
<li>透過一個與此 vector 等長的 logical vector。在 logical vector 中的相對應位置，以 <code>TRUE</code> 或 <code>FALSE</code> 表示是否保留該位置的元素</li>
<li>透過提供元素的「名字」(i.e. <code>names</code> 屬性)</li>
</ol></li>
</ul>
<div id="index-subsetting" class="section level3" number="2.7.1">
<h3 number="2.7.1"><span class="header-section-number">2.7.1</span> index subsetting</h3>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true"></a><span class="co"># z[&lt;integer_vector&gt;]</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true"></a>LETTERS  <span class="co"># R 內建變數: 包含所有大寫英文字母的 character vector</span></span></code></pre></div>
<pre><code>#&gt;  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot; &quot;S&quot;
#&gt; [20] &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true"></a>LETTERS[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;A&quot;</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true"></a>LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true"></a>LETTERS[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;A&quot; &quot;C&quot; &quot;E&quot;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true"></a>LETTERS[<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)]  <span class="co"># Exclude the first 5 elements</span></span></code></pre></div>
<pre><code>#&gt;  [1] &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot; &quot;S&quot; &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot;
#&gt; [20] &quot;Y&quot; &quot;Z&quot;</code></pre>
</div>
<div id="logical-subsetting" class="section level3" number="2.7.2">
<h3 number="2.7.2"><span class="header-section-number">2.7.2</span> Logical subsetting</h3>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true"></a><span class="co"># z[&lt;logical_vector of length(z)&gt;]</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true"></a>age &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">21</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">19</span>)</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true"></a>age[<span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]</span></code></pre></div>
<pre><code>#&gt; [1] 20 19</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true"></a><span class="co">## Creating logical vectors</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true"></a>age[<span class="dv">1</span>] <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>  <span class="co"># returns a logical vector of length 1</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true"></a>age <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>     <span class="co"># returns a logical vector of length(x)</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true"></a><span class="co"># Subset a vector using a logical test</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true"></a>age[age <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>]</span></code></pre></div>
<pre><code>#&gt; [1] 18 19</code></pre>
</div>
<div id="subsetting-with-names" class="section level3" number="2.7.3">
<h3 number="2.7.3"><span class="header-section-number">2.7.3</span> Subsetting with names</h3>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true"></a>age &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">19</span>)</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true"></a><span class="kw">names</span>(age) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;kai&quot;</span>, <span class="st">&quot;pooh&quot;</span>, <span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;piglet&quot;</span>)</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true"></a><span class="co"># age &lt;- c(kai = 40, pooh = 20, tiger = 18, piglet = 19)  # another way of setting names</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true"></a></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true"></a>age</span></code></pre></div>
<pre><code>#&gt;    kai   pooh  tiger piglet 
#&gt;     40     20     18     19</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true"></a>age[<span class="st">&#39;kai&#39;</span>] <span class="op">+</span><span class="st"> </span><span class="dv">9</span></span></code></pre></div>
<pre><code>#&gt; kai 
#&gt;  49</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true"></a>age[<span class="kw">c</span>(<span class="st">&#39;pooh&#39;</span>, <span class="st">&#39;kai&#39;</span>)]</span></code></pre></div>
<pre><code>#&gt; pooh  kai 
#&gt;   20   40</code></pre>
</div>
<div id="modifying-values-in-vector" class="section level3" number="2.7.4">
<h3 number="2.7.4"><span class="header-section-number">2.7.4</span> Modifying Values in vector</h3>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true"></a>a2z &lt;-<span class="st"> </span>LETTERS</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true"></a>a2z[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true"></a>a2z</span></code></pre></div>
<pre><code>#&gt;  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot; &quot;S&quot;
#&gt; [20] &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true"></a>gender &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>)</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true"></a>gender[gender <span class="op">==</span><span class="st"> &quot;m&quot;</span>] &lt;-<span class="st"> &quot;male&quot;</span></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true"></a>gender</span></code></pre></div>
<pre><code>#&gt; [1] &quot;male&quot; &quot;male&quot; &quot;f&quot;    &quot;f&quot;</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true"></a>gender[gender <span class="op">==</span><span class="st"> &quot;f&quot;</span>] &lt;-<span class="st"> &quot;female&quot;</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true"></a>gender</span></code></pre></div>
<pre><code>#&gt; [1] &quot;male&quot;   &quot;male&quot;   &quot;female&quot; &quot;female&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true"></a><span class="kw">names</span>(gender) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;john&quot;</span>, <span class="st">&quot;jenny&quot;</span>, <span class="st">&quot;jane&quot;</span>, <span class="st">&quot;kate&quot;</span>)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true"></a>gender</span></code></pre></div>
<pre><code>#&gt;     john    jenny     jane     kate 
#&gt;   &quot;male&quot;   &quot;male&quot; &quot;female&quot; &quot;female&quot;</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true"></a>gender[<span class="st">&quot;john&quot;</span>] &lt;-<span class="st"> &quot;male&quot;</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true"></a>gender</span></code></pre></div>
<pre><code>#&gt;     john    jenny     jane     kate 
#&gt;   &quot;male&quot;   &quot;male&quot; &quot;female&quot; &quot;female&quot;</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true"></a>gender[<span class="kw">c</span>(<span class="st">&quot;jenny&quot;</span>, <span class="st">&quot;jane&quot;</span>, <span class="st">&quot;kate&quot;</span>)] &lt;-<span class="st"> &quot;female&quot;</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true"></a>gender</span></code></pre></div>
<pre><code>#&gt;     john    jenny     jane     kate 
#&gt;   &quot;male&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot;</code></pre>
<!-- 
Conceptually new topic:
Add if-else concept and then wrap up
-->
</div>
</div>
<div id="if-else" class="section level2" number="2.8">
<h2 number="2.8"><span class="header-section-number">2.8</span> if else</h2>
<ul>
<li>一般而言，R 是<strong>由上至下一行一行地執行程式碼</strong>。有時候我們會希望能<strong>跳過某些程式碼</strong>或是<strong>依據不同的狀況執行不同的程式碼</strong>，這時候我們就需要使用<strong>條件式</strong>。</li>
</ul>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true"></a></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true"></a><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="st">&#39;x is positive&#39;</span>)</span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="st">&#39;x is not positive&#39;</span>)</span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] &quot;x is positive&quot;</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">-1</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true"></a></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true"></a><span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="st">&#39;x is positive&#39;</span>)</span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="st">&#39;x is negative&#39;</span>)</span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="st">&#39;x is zero&#39;</span>)</span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true"></a>}</span>
<span id="cb182-10"><a href="#cb182-10" aria-hidden="true"></a></span>
<span id="cb182-11"><a href="#cb182-11" aria-hidden="true"></a><span class="kw">print</span>(<span class="st">&#39;This is always printed&#39;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;x is negative&quot;
#&gt; [1] &quot;This is always printed&quot;</code></pre>
<ul>
<li><p>在 <code>if</code>-<code>else if</code>-<code>else</code> 的結構中，只有<strong>其中一個</strong>區塊 (被大括弧 <code>{}</code> 包裹的程式碼) 會被執行。執行完該區塊後，就會忽略剩下的條件控制區塊，執行條件式之後的程式碼。</p></li>
<li><p>可以在 <code>if</code> 之後使用多個 <code>else if</code>.</p></li>
<li><p>條件式的結構：</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true"></a><span class="co"># 只有 if</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true"></a><span class="cf">if</span> (<span class="op">&lt;</span>條件<span class="op">&gt;</span>) {</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true"></a>    <span class="op">&lt;</span>Some Code<span class="op">&gt;</span><span class="st">  </span><span class="co"># 條件成立時執行</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true"></a>}</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true"></a></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true"></a><span class="co"># if, else</span></span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true"></a><span class="cf">if</span> (<span class="op">&lt;</span>條件<span class="op">&gt;</span>) {</span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true"></a>    <span class="op">&lt;</span>Some Code<span class="op">&gt;</span><span class="st">  </span><span class="co"># &lt;條件&gt;成立時執行</span></span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true"></a>    <span class="op">&lt;</span>Some Code<span class="op">&gt;</span><span class="st">  </span><span class="co"># &lt;條件&gt;不成立時執行</span></span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true"></a>}</span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true"></a></span>
<span id="cb184-13"><a href="#cb184-13" aria-hidden="true"></a><span class="co"># if, else if, else</span></span>
<span id="cb184-14"><a href="#cb184-14" aria-hidden="true"></a><span class="cf">if</span> (<span class="op">&lt;</span>條件1<span class="op">&gt;</span>) {</span>
<span id="cb184-15"><a href="#cb184-15" aria-hidden="true"></a>    <span class="op">&lt;</span>Some Code<span class="op">&gt;</span><span class="st">          </span><span class="co"># &lt;條件1&gt;成立時執行</span></span>
<span id="cb184-16"><a href="#cb184-16" aria-hidden="true"></a>} <span class="cf">else</span> <span class="cf">if</span> ( <span class="op">&lt;</span>條件2<span class="op">&gt;</span><span class="st"> </span>) {</span>
<span id="cb184-17"><a href="#cb184-17" aria-hidden="true"></a>    <span class="op">&lt;</span>Some Code<span class="op">&gt;</span><span class="st">          </span><span class="co"># &lt;條件1&gt;不成立、&lt;條件2&gt;成立時執行</span></span>
<span id="cb184-18"><a href="#cb184-18" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb184-19"><a href="#cb184-19" aria-hidden="true"></a>    <span class="op">&lt;</span>Some Code<span class="op">&gt;</span><span class="st">          </span><span class="co"># &lt;條件1&gt;、&lt;條件2&gt;皆不成立時執行</span></span>
<span id="cb184-20"><a href="#cb184-20" aria-hidden="true"></a>}</span></code></pre></div></li>
</ul>
</div>
<div id="wrap-up" class="section level2" number="2.9">
<h2 number="2.9"><span class="header-section-number">2.9</span> Wrap up: 句子產生器</h2>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true"></a><span class="co"># Data</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true"></a>name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;kai&quot;</span>, <span class="st">&quot;pooh&quot;</span>, <span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;piglet&quot;</span>)</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true"></a>age &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">19</span>)</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true"></a></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true"></a><span class="co"># Randomly draw 2 subjects</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true"></a>who &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">size =</span> <span class="dv">2</span>)</span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true"></a></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true"></a><span class="co"># Find out who is older</span></span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true"></a>age1 &lt;-<span class="st"> </span>age[who[<span class="dv">1</span>]]</span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true"></a>age2 &lt;-<span class="st"> </span>age[who[<span class="dv">2</span>]]</span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true"></a><span class="cf">if</span> (age1 <span class="op">&gt;</span><span class="st"> </span>age2) {</span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true"></a>    comparitive &lt;-<span class="st"> &#39; is older than &#39;</span></span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true"></a>} <span class="cf">else</span> <span class="cf">if</span> (age1 <span class="op">&lt;</span><span class="st"> </span>age2) {</span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true"></a>    comparitive &lt;-<span class="st"> &#39; is younger than &#39;</span></span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true"></a>    comparitive &lt;-<span class="st"> &#39; is as old as &#39;</span></span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true"></a>}</span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true"></a></span>
<span id="cb185-19"><a href="#cb185-19" aria-hidden="true"></a><span class="co"># Construct sentence</span></span>
<span id="cb185-20"><a href="#cb185-20" aria-hidden="true"></a><span class="kw">paste0</span>(name[who[<span class="dv">1</span>]], comparitive, name[who[<span class="dv">2</span>]])</span></code></pre></div>
<pre><code>#&gt; [1] &quot;pooh is older than tiger&quot;</code></pre>
</div>
<div id="r-markdown" class="section level2" number="2.10">
<h2 number="2.10"><span class="header-section-number">2.10</span> R Markdown</h2>
<ul>
<li><p>使用前需先安裝 <code>rmarkdown</code>:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true"></a><span class="kw">install.packages</span>(<span class="st">&#39;rmarkdown&#39;</span>)</span></code></pre></div></li>
<li><p>R Markdown (<code>.Rmd</code>) 就像之前同學用來寫自我介紹的 Markdown 文件 (<code>.md</code>) 一樣是一種<strong>純文字格式</strong>。R Markdown 的語法其實只是 Markdown 的一種擴充：它新增了一些特殊的語法，讓使用者可以直接在 R Markdown 裡面撰寫程式碼，並透過 R 將這些程式碼的<strong>運算結果插入 R Markdown 的輸出文件</strong>當中。</p></li>
<li><p>knitr Code Chunk</p>
<ul>
<li>執行：由上至下執行</li>
<li>後面的 chunk 可以讀取之前的 chunks 產生的變數</li>
</ul></li>
</ul>
<p>(在 RStudio 使用 R Markdown)</p>
<ul>
<li><p>使用 RStudio 開啟 R Markdown (<code>.Rmd</code>) 時，Rmd 檔會出現在 Source Pane 讓使用者編輯</p></li>
<li><p>將 R Markdown (<code>.Rmd</code>) 輸出 (<code>knit</code> )成 HTML 檔 (<code>.html</code>):</p></li>
</ul>
<div class="figure">
<img src="https://bookdown.org/yihui/rmarkdown/images/hello-rmd.png" alt="R Markdown document in RStudio^[Figure from https://bookdown.org/yihui/rmarkdown/images/hello-rmd.png]." width="80%" />
<p class="caption">
(#fig:unnamed-chunk-39)R Markdown document in RStudio<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>.
</p>
</div>
</div>
<div id="參考資源" class="section level2 unnumbered">
<h2 class="unnumbered">參考資源</h2>
<ol style="list-style-type: decimal">
<li><p>Grolemund, G. (2014). <a href="https://rstudio-education.github.io/hopr/"><strong><em>Hands-on programming with R</em></strong></a><br />
R Objects (<a href="https://rstudio-education.github.io/hopr/r-objects" class="uri">https://rstudio-education.github.io/hopr/r-objects</a>)<br />
Modifying Values (<a href="https://rstudio-education.github.io/hopr/modify" class="uri">https://rstudio-education.github.io/hopr/modify</a>)</p></li>
<li><p>Xie, Y., Allaire, J., &amp; Grolemund, G. (2019). <a href="https://bookdown.org/yihui/rmarkdown"><strong><em>R Markdown: The Definitive Guide</em></strong></a></p></li>
</ol>
<!--chapter:end:02-vector_datatypes_ifelse.Rmd-->
</div>
</div>
<div id="lab03" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Base R (II)</h1>
<p><span class="course-resource">(<a href="https://docs.google.com/presentation/d/14naJhj_PYydPoyy9zvafk1TWQIbsqmIEsHeGgcYbkag">投影片</a> /
<a href="https://rlads2021.github.io/lab/src/04.zip">程式碼</a> /
<a href="#">影片</a>)
<!-- https://youtu.be/vuffe_EhTk0 --></span></p>
<div id="list" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> list</h2>
<ul>
<li><p>vector 是 R 裡面最「簡單」的資料結構。有時候我們需要比較更複雜的資料結構處理我們遇到的資料，例如，我們或許需要儲存<strong>不同資料類型</strong>或是<strong>具有階層結構</strong>的資料。面對這兩種需求，vector 無能為力，因此需要用到 R 的 list。</p></li>
<li><p>R 可以透過 <code>list()</code> 去製造出 list。<code>list()</code> 的使用方式很類似用來製造 vector 的 <code>c()</code>，但與 <code>c()</code> 不同的是，<code>list()</code></p>
<ol style="list-style-type: decimal">
<li><p>能使用<strong>不同的資料類型</strong></p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true"></a><span class="kw">list</span>(<span class="ot">TRUE</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&quot;Hello&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[2]]
#&gt; [1] 1 2 3
#&gt; 
#&gt; [[3]]
#&gt; [1] &quot;Hello&quot;</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true"></a><span class="kw">list</span>(<span class="st">&#39;kai&#39;</span> =<span class="st"> </span><span class="ot">TRUE</span>, <span class="st">&#39;pooh&#39;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&#39;tiger&#39;</span> =<span class="st"> &quot;Hello&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; $kai
#&gt; [1] TRUE
#&gt; 
#&gt; $pooh
#&gt; [1] 1 2 3
#&gt; 
#&gt; $tiger
#&gt; [1] &quot;Hello&quot;</code></pre></li>
<li><p>具有階層結構，亦即，<code>list()</code> 裡面可以放入另一個 <code>list()</code></p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true"></a><span class="kw">list</span>(<span class="fl">1.1</span>, <span class="kw">list</span>(<span class="fl">2.1</span>, <span class="st">&quot;Hello&quot;</span>))</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] 1.1
#&gt; 
#&gt; [[2]]
#&gt; [[2]][[1]]
#&gt; [1] 2.1
#&gt; 
#&gt; [[2]][[2]]
#&gt; [1] &quot;Hello&quot;</code></pre></li>
</ol></li>
</ul>
<div id="subsetting" class="section level3" number="3.1.1">
<h3 number="3.1.1"><span class="header-section-number">3.1.1</span> Subsetting</h3>
<ul>
<li><p>通常我們會習慣為 list 加上名字 (<code>names</code>)，幫助我們更容易處理這種比較複雜的資料結構</p></li>
<li><p><code>[]</code>: 與 vector 一樣，我們可以透過 <code>lst[&lt;char vector of names&gt;]</code>、<code>lst[&lt;integer vector&gt;]</code> 或 <code>lst[&lt;logical vector&gt;]</code> 去 subset list</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true"></a>pooh &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">age =</span> <span class="dv">20</span>, <span class="dt">single =</span> <span class="ot">FALSE</span>, <span class="dt">tags =</span> <span class="kw">c</span>(<span class="st">&quot;ig&quot;</span>, <span class="st">&quot;selfie&quot;</span>))</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true"></a>pooh[<span class="st">&#39;single&#39;</span>]</span></code></pre></div>
<pre><code>#&gt; $single
#&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true"></a>pooh[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>#&gt; $single
#&gt; [1] FALSE
#&gt; 
#&gt; $tags
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true"></a>pooh[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]</span></code></pre></div>
<pre><code>#&gt; $age
#&gt; [1] 20
#&gt; 
#&gt; $tags
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;</code></pre></li>
<li><p>就像 <code>vec[&lt;some vector&gt;]</code> 會回傳<strong>一部分的 vector (sub-vector)</strong>；<code>lst[&lt;some vector&gt;]</code> 也會回傳<strong>一部分的 list (sub-list)</strong>。換言之，使用 <code>[]</code> 時，回傳值的<strong>資料結構不會改變</strong>。</p></li>
<li><p>我們可以將 list 想像成一列火車，每節車廂是一個長度為 1 的 sub-list，車廂<strong>裡面</strong>是這個 sub-list 儲存的值。欲取得 sub-list，使用的是 <code>[]</code>；欲取得 sub-list <strong>裡面的值</strong> (i.e. 脫去外層的 list)，需使用 <code>[[]]</code></p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true"></a><span class="co"># 回傳 sub-list</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true"></a><span class="kw">typeof</span>(pooh[<span class="st">&quot;tags&quot;</span>])</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true"></a>pooh[<span class="st">&quot;tags&quot;</span>]</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true"></a></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true"></a><span class="co"># 回傳 list 之內的「值」，在此為一個 char vector</span></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true"></a><span class="kw">typeof</span>(pooh[[<span class="st">&quot;tags&quot;</span>]])</span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true"></a>pooh[[<span class="st">&quot;tags&quot;</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;list&quot;
#&gt; $tags
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; 
#&gt; [1] &quot;character&quot;
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;</code></pre>
<ul>
<li><code>lst[["&lt;name&gt;"]]</code> 有另一種更簡便的寫法：<code>lst$&lt;name&gt;</code>, e.g. <code>pooh[["tags"]]</code> 可改寫成 <code>pooh$tags</code></li>
</ul></li>
</ul>
<div class="figure">
<img src="assets/img/list_as_train.png" alt="List as a train" width="100%" />
<p class="caption">
(#fig:list-as-train)List as a train
</p>
</div>
</div>
<div id="nested-structure" class="section level3" number="3.1.2">
<h3 number="3.1.2"><span class="header-section-number">3.1.2</span> Nested Structure</h3>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true"></a>a_lst &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">name =</span> <span class="st">&quot;pooh&quot;</span>,</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true"></a>              <span class="dt">info =</span> <span class="kw">list</span>(<span class="dt">age =</span> <span class="dv">20</span>,</span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true"></a>                          <span class="dt">tags =</span> <span class="kw">c</span>(<span class="st">&quot;ig&quot;</span>, <span class="st">&quot;selfie&quot;</span>)))</span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true"></a></span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true"></a><span class="co"># Get &quot;selfie&quot;  </span></span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true"></a>a_lst[[<span class="st">&#39;info&#39;</span>]]</span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true"></a>a_lst[[<span class="st">&#39;info&#39;</span>]][[<span class="st">&#39;tags&#39;</span>]]</span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true"></a>a_lst[[<span class="st">&#39;info&#39;</span>]][[<span class="st">&#39;tags&#39;</span>]][<span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; $age
#&gt; [1] 20
#&gt; 
#&gt; $tags
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; 
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; [1] &quot;selfie&quot;</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true"></a><span class="co"># Another way to get &quot;selfie&quot;</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true"></a>a_lst[<span class="st">&#39;info&#39;</span>][[<span class="dv">1</span>]]</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true"></a>a_lst[<span class="st">&#39;info&#39;</span>][[<span class="dv">1</span>]][<span class="st">&#39;tags&#39;</span>][[<span class="dv">1</span>]]</span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true"></a>a_lst[<span class="st">&#39;info&#39;</span>][[<span class="dv">1</span>]][<span class="st">&#39;tags&#39;</span>][[<span class="dv">1</span>]][<span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; $age
#&gt; [1] 20
#&gt; 
#&gt; $tags
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; 
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; [1] &quot;selfie&quot;</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true"></a><span class="co"># Yet another way to get &quot;selfie&quot;</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true"></a>a_lst[[<span class="dv">2</span>]]</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true"></a>a_lst[[<span class="dv">2</span>]][[<span class="dv">2</span>]]</span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true"></a>a_lst[[<span class="dv">2</span>]][[<span class="dv">2</span>]][<span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; $age
#&gt; [1] 20
#&gt; 
#&gt; $tags
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; 
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; [1] &quot;selfie&quot;</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true"></a><span class="co"># The most &#39;readable&#39; way to get &quot;selfie&quot;</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true"></a>a_lst<span class="op">$</span>info</span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true"></a>a_lst<span class="op">$</span>info<span class="op">$</span>tags</span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true"></a>a_lst<span class="op">$</span>info<span class="op">$</span>tags[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; $age
#&gt; [1] 20
#&gt; 
#&gt; $tags
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; 
#&gt; [1] &quot;ig&quot;     &quot;selfie&quot;
#&gt; [1] &quot;selfie&quot;</code></pre>
</div>
</div>
<div id="for-loop" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> for loop</h2>
<ul>
<li><p>上週介紹的條件式 (if-else) 讓我們可以依據不同狀況執行不同的程式碼，藉此能幫助我們寫出更有彈性的程式。迴圈讓我們能重複執行某一區塊的程式碼，如此就不需要重複寫出相同的程式碼。</p></li>
<li><p>R 有 for 與 while 迴圈。一般而言，在資料分析時非常少會用到 while 迴圈，因此實習課不作介紹，有興趣的同學可自行參考線上教材或教科書。</p></li>
<li><p>for loop 的結構如下</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true"></a><span class="cf">for</span> (<span class="op">&lt;</span>變數<span class="op">&gt;</span><span class="st"> </span><span class="cf">in</span> <span class="op">&lt;</span>vector<span class="op">&gt;</span>) {</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true"></a>    <span class="op">&lt;</span>some code<span class="op">&gt;</span></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true"></a>}</span></code></pre></div></li>
<li><p>for loop 會使 <code>{}</code> 內的程式碼重複執行數次，其次數等於 <code>&lt;vector&gt;</code> 的長度；並且，在第 n 次開始執行 <code>{}</code> 內的程式碼前，會將 <code>&lt;vector&gt;</code> 裡的第 n 個元素指派給 <code>&lt;變數&gt;</code>。所以在第一次迴圈時，可透過 <code>&lt;變數&gt;</code> 取得 <code>&lt;vector&gt;</code> 中的第一個元素；在第二次迴圈時，可取得 <code>&lt;vector&gt;</code> 中的第二個元素；依此類推，最後一次迴圈則可以透過 <code>&lt;變數&gt;</code> 取得 <code>&lt;vector&gt;</code> 中的最後一個元素。</p></li>
</ul>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true"></a>vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;謝&quot;</span>, <span class="st">&quot;老師&quot;</span>, <span class="st">&quot;好&quot;</span>, <span class="st">&quot;帥&quot;</span>)</span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true"></a>  </span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true"></a><span class="cf">for</span> (word <span class="cf">in</span> vec) {</span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true"></a>    <span class="co"># Will execute 4 times, </span></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true"></a>    <span class="co"># each time a new value from `vec` will be assigned to `word`</span></span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true"></a>    <span class="kw">print</span>(word)</span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] &quot;謝&quot;
#&gt; [1] &quot;老師&quot;
#&gt; [1] &quot;好&quot;
#&gt; [1] &quot;帥&quot;</code></pre>
<div id="for-loop-的各種型態" class="section level3" number="3.2.1">
<h3 number="3.2.1"><span class="header-section-number">3.2.1</span> for loop 的各種型態</h3>
<ul>
<li>R 的 for 只有一種結構：每次疊代將 vector (或 list) 中的一個元素指派給變數 (<code>&lt;var&gt; in &lt;vector&gt;</code>)。但因為 R 向量式程式語言的特性，R 的 for 迴圈很容易改寫成其它更方便的型態。</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>有時候我們需要知道<strong>迴圈進行到 <code>&lt;vector&gt;</code> 的第幾個元素</strong>，這時候通常會使用 <code>seq_along(&lt;vector&gt;)</code> 去製造出與 <code>&lt;vector&gt;</code> 等長的整數序列 (e.g. <code>seq_along(c('a', 'b', 'c'))</code> 會回傳 <code>1 2 3</code>)，如此我們便可知道進行到第幾次迴圈，也可透過 <code>&lt;vector&gt;[i]</code> 取得與該次迴圈對應的元素。</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true"></a>vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;謝&quot;</span>, <span class="st">&quot;老師&quot;</span>, <span class="st">&quot;好&quot;</span>, <span class="st">&quot;帥&quot;</span>)</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(vec)) {</span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="kw">paste</span>(i, vec[i]))</span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] &quot;1 謝&quot;
#&gt; [1] &quot;2 老師&quot;
#&gt; [1] &quot;3 好&quot;
#&gt; [1] &quot;4 帥&quot;</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true"></a>vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;謝&quot;</span>, <span class="st">&quot;老師&quot;</span>, <span class="st">&quot;好&quot;</span>, <span class="st">&quot;帥&quot;</span>)</span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(vec)) {</span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true"></a>    <span class="kw">print</span>(vec[i])</span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true"></a></span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true"></a>    <span class="co"># Print `?` in the last loop</span></span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true"></a>    <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="kw">length</span>(vec)) {</span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true"></a>        <span class="kw">print</span>(<span class="st">&#39;?&#39;</span>)</span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true"></a>    }</span>
<span id="cb215-9"><a href="#cb215-9" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] &quot;謝&quot;
#&gt; [1] &quot;老師&quot;
#&gt; [1] &quot;好&quot;
#&gt; [1] &quot;帥&quot;
#&gt; [1] &quot;?&quot;</code></pre></li>
<li><p>我們也可以透過 <code>names()</code> 在 for loop 裡使用 <code>&lt;vector&gt;</code> 的 names 屬性：</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true"></a>vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">Monday =</span> <span class="st">&quot;rainy&quot;</span>, <span class="dt">Tuesday =</span> <span class="st">&quot;cloudy&quot;</span>, <span class="dt">Wednesday =</span> <span class="st">&quot;sunny&quot;</span>)</span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true"></a><span class="cf">for</span> (name <span class="cf">in</span> <span class="kw">names</span>(vec)) {</span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="kw">paste0</span>(name, <span class="st">&#39; was &#39;</span>, vec[name], <span class="st">&#39;.&#39;</span>))</span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] &quot;Monday was rainy.&quot;
#&gt; [1] &quot;Tuesday was cloudy.&quot;
#&gt; [1] &quot;Wednesday was sunny.&quot;</code></pre></li>
</ol>
<div class="hands-on" data-title="進階迴圈控制：break &amp; next">
<p>常常我們會需要對 for loop 有「更多的控制」。前面在 for loop 中使用到條件式即是一個例子。但常常條件式本身的功能並不足夠：執行迴圈時，在符合特定條件下，</p>
<ul>
<li><p>有時候我們會希望能<strong>忽略一次迴圈中「所有尚未被執行的程式碼」</strong>，這時就會使用到 <code>next</code>:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true"></a><span class="co"># 使用 next &#39;忽略一次&#39; 迴圈</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true"></a>    <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">5</span>) {</span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true"></a>        <span class="kw">print</span>(<span class="st">&quot;Skipping print(i) if i == 5&quot;</span>)</span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true"></a>        <span class="cf">next</span></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true"></a>    }</span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true"></a>    <span class="kw">print</span>(i)</span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] 1
#&gt; [1] 2
#&gt; [1] 3
#&gt; [1] 4
#&gt; [1] &quot;Skipping print(i) if i == 5&quot;
#&gt; [1] 6
#&gt; [1] 7
#&gt; [1] 8
#&gt; [1] 9
#&gt; [1] 10</code></pre></li>
<li><p>有時我們需要<strong>跳出整個迴圈</strong>，亦即不再執行 for loop 裡面的程式碼。這時就會使用到 <code>break</code>:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true"></a><span class="co"># 使用 break 跳出整個迴圈</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true"></a>    <span class="cf">if</span> (i <span class="op">==</span><span class="st"> </span><span class="dv">5</span>) {</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true"></a>        <span class="kw">print</span>(<span class="st">&quot;Breaking out the for loop&quot;</span>)</span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true"></a>        <span class="cf">break</span></span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true"></a>    }</span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true"></a>    <span class="kw">print</span>(i)</span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] 1
#&gt; [1] 2
#&gt; [1] 3
#&gt; [1] 4
#&gt; [1] &quot;Breaking out the for loop&quot;</code></pre></li>
</ul>
<div id="實際應用修改檔案名稱" class="section level3" number="3.2.2">
<h3 number="3.2.2"><span class="header-section-number">3.2.2</span> 實際應用：修改檔案名稱</h3>
<p>下方的程式碼能將多個檔案 (圖片) 重新命名 (並透過 <code>next</code> 忽略某些檔案)。有興趣者請下載<a href="https://rlads2019.github.io/lab/src/04.zip">原始碼</a>，裡面有一個資料夾 <code>dice/</code>。執行此程式碼前，需將<strong>工作目錄設至 <code>dice/</code> 資料夾</strong>。</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true"></a><span class="cf">for</span> (file <span class="cf">in</span> <span class="kw">list.files</span>()) {</span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true"></a>    <span class="co"># 忽略 `00_not_an_img.txt` 這個檔案</span></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true"></a>    <span class="cf">if</span> (file <span class="op">==</span><span class="st"> &#39;00_not_an_img.txt&#39;</span>) {</span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true"></a>        <span class="cf">next</span></span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true"></a>    }</span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true"></a>    </span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true"></a>    <span class="kw">file.rename</span>(<span class="dt">from =</span> file, <span class="dt">to =</span> <span class="kw">paste0</span>(<span class="st">&#39;dice-&#39;</span>, file))</span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true"></a>}</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="wrap-upfor-loop-與-list" class="section level2" number="3.3">
<h2 number="3.3"><span class="header-section-number">3.3</span> Wrap up：for loop 與 list</h2>
<ul>
<li><p><a href="https://rlads2021.github.io/lab/notes/03.html#wrap-up">上週</a>我們使用過 3 個長度為 4 的 vector 來儲存關於 4 個人
(“kai”, “pooh”, “tiger”, “piglet”)
的資料。但使用這種方式儲存資料似乎有些違反直覺，因為它將關於一個人的資訊 (<code>name</code> 與 <code>age</code>) 分開來儲存在獨立的 vector。</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true"></a><span class="co"># Data</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true"></a>name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;kai&quot;</span>, <span class="st">&quot;pooh&quot;</span>, <span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;piglet&quot;</span>)</span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true"></a>age &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">19</span>)</span></code></pre></div></li>
<li><p>對於這種彼此之間具有關聯的資料，一種更好的方式是將它們<strong>儲存在一起</strong>，因為這不只幫助我們在「程式上」更容易去操弄這筆資料，更讓我們能以「階層組織」去「想像」我們的資料。這裡我們使用 <code>list</code> 去改寫上週的資料：</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true"></a>member &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true"></a>    <span class="kw">list</span>(<span class="dt">name =</span> <span class="st">&quot;kai&quot;</span>, <span class="dt">age =</span> <span class="dv">40</span>),</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true"></a>    <span class="kw">list</span>(<span class="dt">name =</span> <span class="st">&quot;pooh&quot;</span>, <span class="dt">age =</span> <span class="dv">20</span>),</span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true"></a>    <span class="kw">list</span>(<span class="dt">name =</span> <span class="st">&quot;tiger&quot;</span>, <span class="dt">age =</span> <span class="dv">18</span>),</span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true"></a>    <span class="kw">list</span>(<span class="dt">name =</span> <span class="st">&quot;piglet&quot;</span>, <span class="dt">age =</span> <span class="dv">19</span>)</span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true"></a>)</span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true"></a></span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true"></a>member</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [[1]]$name
#&gt; [1] &quot;kai&quot;
#&gt; 
#&gt; [[1]]$age
#&gt; [1] 40
#&gt; 
#&gt; 
#&gt; [[2]]
#&gt; [[2]]$name
#&gt; [1] &quot;pooh&quot;
#&gt; 
#&gt; [[2]]$age
#&gt; [1] 20
#&gt; 
#&gt; 
#&gt; [[3]]
#&gt; [[3]]$name
#&gt; [1] &quot;tiger&quot;
#&gt; 
#&gt; [[3]]$age
#&gt; [1] 18
#&gt; 
#&gt; 
#&gt; [[4]]
#&gt; [[4]]$name
#&gt; [1] &quot;piglet&quot;
#&gt; 
#&gt; [[4]]$age
#&gt; [1] 19</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true"></a><span class="cf">for</span> (person <span class="cf">in</span> member) {</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true"></a>    name &lt;-<span class="st"> </span>person<span class="op">$</span>name</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true"></a>    age &lt;-<span class="st"> </span>person<span class="op">$</span>age</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true"></a></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true"></a>    <span class="co"># 將組成句子的片語儲存於 char vector `phrases`</span></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true"></a>    phrases &lt;-<span class="st"> </span><span class="kw">c</span>(name, <span class="st">&quot; is &quot;</span>, age)</span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true"></a>    <span class="cf">if</span> (age <span class="op">&lt;</span><span class="st"> </span><span class="dv">35</span>) {</span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true"></a>        phrases[<span class="dv">4</span>] &lt;-<span class="st"> &quot;, which is quite young&quot;</span></span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true"></a>    }</span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true"></a></span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true"></a>    <span class="co"># 將各片語連接起來成為一個句子</span></span>
<span id="cb227-12"><a href="#cb227-12" aria-hidden="true"></a>    sentence &lt;-<span class="st"> </span><span class="kw">paste0</span>(phrases,  <span class="dt">collapse =</span> <span class="st">&#39;&#39;</span>)</span>
<span id="cb227-13"><a href="#cb227-13" aria-hidden="true"></a></span>
<span id="cb227-14"><a href="#cb227-14" aria-hidden="true"></a>    <span class="kw">print</span>(sentence)</span>
<span id="cb227-15"><a href="#cb227-15" aria-hidden="true"></a>}</span></code></pre></div>
<pre><code>#&gt; [1] &quot;kai is 40&quot;
#&gt; [1] &quot;pooh is 20, which is quite young&quot;
#&gt; [1] &quot;tiger is 18, which is quite young&quot;
#&gt; [1] &quot;piglet is 19, which is quite young&quot;</code></pre></li>
</ul>
</div>
<div id="data-frame" class="section level2" number="3.4">
<h2 number="3.4"><span class="header-section-number">3.4</span> data frame</h2>
<ul>
<li><p>data frame 是 R 語言非常重要的資料結構，它造就了 R 強大的<strong>表格式資料</strong>處理能力</p></li>
<li><p>data frame 是一種二維的資料結構。這種資料結構基本上與我們熟悉的 Excel (或 google 試算表) 非常類似：</p>
<div class="figure">
<img src="https://img.yongfu.name/rlads/spreadsheet.png" alt="A data frame looks like an Excel Spreadsheet" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-57)A data frame looks like an Excel Spreadsheet
</p>
</div>
<ul>
<li><p>data frame 的每一橫列 (row) 皆是一筆資料 (e.g. 一位受訪者所填的問卷)</p></li>
<li><p>data frame 的每一 (直) 欄 (column) 代表一個變項 (e.g. 問卷上的某個題目)</p></li>
</ul></li>
</ul>
<div class="figure">
<img src="assets/img/tibble.png" alt="A Data Frame" width="80%" />
<p class="caption">
(#fig:unnamed-chunk-58)A Data Frame
</p>
</div>
<ul>
<li><p>我們可以使用 <code>tibble</code> 套件的 <code>tibble()</code><a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a> 建立 data frame。上圖中的 data frame 例子即可由下方的程式碼所建立:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true"></a><span class="kw">library</span>(tibble)</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true"></a></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true"></a>df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">name =</span> <span class="kw">c</span>(<span class="st">&quot;kai&quot;</span>, <span class="st">&quot;pooh&quot;</span>, <span class="st">&quot;tiger&quot;</span>, <span class="st">&quot;piglet&quot;</span>),</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true"></a>             <span class="dt">age  =</span> <span class="kw">c</span>(<span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">19</span>), </span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true"></a>             <span class="dt">grad =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>))</span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true"></a>df</span></code></pre></div>
<pre><code>#&gt; # A tibble: 4 x 3
#&gt;   name     age grad 
#&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;
#&gt; 1 kai       40 FALSE
#&gt; 2 pooh      20 TRUE 
#&gt; 3 tiger     18 FALSE
#&gt; 4 piglet    19 TRUE</code></pre>
<ul>
<li><code>tibble()</code> 裡的每個 vector 對映到 data frame 中的一欄 (column)。因此 data frame 中不同欄的資料類型可能不同，但<strong>每一欄 (變項) 內的資料類型必須相同</strong> (因為 vector 只能儲存相同的資料類型)。</li>
</ul></li>
<li><p>下方的指令可用於檢視 data frame 的資訊</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true"></a><span class="kw">nrow</span>(df)   <span class="co"># number of rows</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true"></a><span class="kw">ncol</span>(df)   <span class="co"># number of columns</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true"></a><span class="kw">dim</span>(df)    <span class="co"># 形狀 (num of rows, num of columns)</span></span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true"></a><span class="kw">names</span>(df)  <span class="co"># name of each column</span></span></code></pre></div>
<pre><code>#&gt; [1] 4
#&gt; [1] 3
#&gt; [1] 4 3
#&gt; [1] &quot;name&quot; &quot;age&quot;  &quot;grad&quot;</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true"></a>tibble<span class="op">::</span><span class="kw">glimpse</span>(df)  <span class="co"># 關於 df 的各種資訊</span></span></code></pre></div>
<pre><code>#&gt; Rows: 4
#&gt; Columns: 3
#&gt; $ name &lt;chr&gt; &quot;kai&quot;, &quot;pooh&quot;, &quot;tiger&quot;, &quot;piglet&quot;
#&gt; $ age  &lt;dbl&gt; 40, 20, 18, 19
#&gt; $ grad &lt;lgl&gt; FALSE, TRUE, FALSE, TRUE</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true"></a><span class="kw">str</span>(df)              <span class="co"># 也可用 Base R 內建函數: str()</span></span></code></pre></div>
<pre><code>#&gt; tibble [4 × 3] (S3: tbl_df/tbl/data.frame)
#&gt;  $ name: chr [1:4] &quot;kai&quot; &quot;pooh&quot; &quot;tiger&quot; &quot;piglet&quot;
#&gt;  $ age : num [1:4] 40 20 18 19
#&gt;  $ grad: logi [1:4] FALSE TRUE FALSE TRUE</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true"></a><span class="kw">View</span>(df)   <span class="co"># View data frame in RStudio source pane</span></span></code></pre></div></li>
</ul>
<div id="subsetting-returning-a-data-frame" class="section level3" number="3.4.1">
<h3 number="3.4.1"><span class="header-section-number">3.4.1</span> Subsetting: returning a data frame</h3>
<ul>
<li><p>data frame 的篩選 (subsetting) 與 vector 和 list 類似，差別只在於 data frame 屬於二維的資料結構，因此需要提供 2 個 vector 進行資料的篩選：</p>
<pre class="null"><code>df[&lt;vector 1&gt;, &lt;vector 2&gt;]</code></pre>
<ul>
<li><p>在這裡，<code>&lt;vector 1&gt;</code> 篩選的是「列 (row)」，亦即，<code>&lt;vector 1&gt;</code> 決定要篩選出哪幾個觀察值 (observations)。<code>&lt;vector 2&gt;</code> 篩選的則是「欄 (column)」，亦即，<code>&lt;vector 2&gt;</code> 決定要篩選出哪些變項 (variables)。</p></li>
<li><p>以這種語法進行篩選，回傳的<strong>一定是 data frame</strong><a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>，即使只有篩選出一個值 (e.g. df[1, 1])</p></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true"></a>df[<span class="dv">2</span>, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>#&gt; # A tibble: 1 x 1
#&gt;   name 
#&gt;   &lt;chr&gt;
#&gt; 1 pooh</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true"></a>df[<span class="dv">2</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]  <span class="co"># df[2, c(&quot;name&quot;, &quot;age&quot;)]</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 1 x 2
#&gt;   name    age
#&gt;   &lt;chr&gt; &lt;dbl&gt;
#&gt; 1 pooh     20</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true"></a>df[<span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>#&gt; # A tibble: 1 x 3
#&gt;   name    age grad 
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;
#&gt; 1 pooh     20 TRUE</code></pre>
</div>
<div id="subsetting-returning-a-vector" class="section level3" number="3.4.2">
<h3 number="3.4.2"><span class="header-section-number">3.4.2</span> Subsetting: returning a vector</h3>
<ul>
<li><p>若想要從 data frame 裡面篩選出 vector (取得「火車車廂」<strong>內</strong>的值)，則要使用<a href="#fig:list-as-train">之前提過</a>的 <code>$</code> 或 <code>[[]]</code>:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true"></a>df[[<span class="dv">2</span>]]      <span class="co"># df[[&lt;column_index&gt;]]</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true"></a>df[[<span class="st">&quot;age&quot;</span>]]  <span class="co"># df[[&quot;&lt;column_name&gt;&quot;]]</span></span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true"></a>df<span class="op">$</span>age       <span class="co"># df$&lt;column_name&gt;, 最常見</span></span></code></pre></div>
<pre><code>#&gt; [1] 40 20 18 19
#&gt; [1] 40 20 18 19
#&gt; [1] 40 20 18 19</code></pre></li>
<li><p>篩選 data frame 而回傳 vector 是個很實用的技巧，因為我們可以使用這個回傳的 vector 當作我們進一步篩選 data frame 的依據，例如：</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true"></a>over19 &lt;-<span class="st"> </span>df<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">19</span>  </span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true"></a>over19</span></code></pre></div>
<pre><code>#&gt; [1]  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true"></a><span class="co"># subset df with obs. over 19</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true"></a>df[over19, ]</span></code></pre></div>
<pre><code>#&gt; # A tibble: 2 x 3
#&gt;   name    age grad 
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;
#&gt; 1 kai      40 FALSE
#&gt; 2 pooh     20 TRUE</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true"></a><span class="co"># subset df with obs. below or equal 19</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true"></a>df[<span class="op">!</span>over19, ]</span></code></pre></div>
<pre><code>#&gt; # A tibble: 2 x 3
#&gt;   name     age grad 
#&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;
#&gt; 1 tiger     18 FALSE
#&gt; 2 piglet    19 TRUE</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true"></a><span class="co"># 合併起來寫 (最常見的寫法，但比較難讀懂)</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true"></a>df[df<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">19</span>, ]</span></code></pre></div>
<pre><code>#&gt; # A tibble: 2 x 3
#&gt;   name    age grad 
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;
#&gt; 1 kai      40 FALSE
#&gt; 2 pooh     20 TRUE</code></pre></li>
<li><p>透過這個技巧，R 能幫助我們快速篩選出需要的資料，例如，我們可以結合 <code>age</code> 與 <code>grad</code> 兩個變項，篩選出「小於 20 歲且為研究所學生」的 data frame:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true"></a>df[(df<span class="op">$</span>age <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>grad), ]</span></code></pre></div>
<pre><code>#&gt; # A tibble: 1 x 3
#&gt;   name     age grad 
#&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;lgl&gt;
#&gt; 1 piglet    19 TRUE</code></pre></li>
</ul>
<!--chapter:end:03-list_loop_dataframe.Rmd-->
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>MacOS’s figure source: <a href="https://www.dummies.com/computers/macs/mac-operating-systems/basics-of-the-os-x-folder-structure/" class="uri">https://www.dummies.com/computers/macs/mac-operating-systems/basics-of-the-os-x-folder-structure/</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>電腦真的不便宜，學好程式讓你能更徹底地使用你的電腦（值回票價？）<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>這對 Windows 系統不全然精確。比較新的 Windows 通常只有一個根目錄 (亦即 <code>C:</code>, aka C 槽)，但 Windows 可以有多個根目錄，例如 <code>D:</code>, <code>E:</code>, <code>F:</code>, …。插入隨身碟時，Windows 通常也會建立一個新的槽 (e.g., <code>E:</code>)，但在類 Unix 系統 (e.g., Mac) 上，則會將隨身碟接在根目錄 (只有一個) 之下的某個資料夾內。<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>注意：與前述不同的是，Windows 系統的路徑是以<strong>反斜線 (<code>\</code>)</strong> 而非 <strong><code>/</code></strong> 作為資料夾的分隔，但使用者在輸入路徑時，<strong>可以使用 <code>/</code></strong>。<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>若 <code>.</code> 出現在路徑之中 (不常使用，但為合法的語法，例如 <code>/Users/./Pooh</code>)，即是指 <code>.</code> 出現之前的路徑 (在此例中是 <code>/Users</code>)。所以 <code>/Users/Pooh</code>, <code>/Users/./Pooh</code>, <code>/Users/././Pooh</code> 和 <code>/Users/./././Pooh</code> 全都是指涉相同的資料夾。<a href="#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>在 Windows 上，若直接輸入 <code>cd</code> 指令 (後方沒有接路徑)，會直接印出當前的工作目錄。此時，<code>cd</code> 等同於類 Unix 系統的 <code>pwd</code> 指令。<a href="#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>所以在 Windows 上 <code>cd ../Tiger</code> 與 <code>cd ..\Tiger</code> 皆可使用。<a href="#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>但若路徑使用反斜線，只有 Windows 上可以運行，因為反斜線在其它系統上不代表路徑內的分隔符號。<a href="#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>例如，<a href="https://code.visualstudio.com">VScode</a>、<a href="https://notepad-plus-plus.org/downloads/">notepad++</a>、<a href="https://atom.io">Atom</a> 等。若電腦上沒有文字編輯器，強烈建議選擇一個進行安裝。若不知道安裝哪一個，建議安裝 VScode (助教們比較熟悉)。<a href="#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>Figure from <a href="https://bookdown.org/yihui/rmarkdown/images/hello-rmd.png" class="uri">https://bookdown.org/yihui/rmarkdown/images/hello-rmd.png</a><a href="#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>R 的內建函數 <code>data.frame()</code> 是最常被用於建立 data frame 的函數。<code>tibble</code> 套件裡的 <code>tibble()</code> 則與 <code>data.frame()</code> 的功能幾乎一樣，只是 <code>tibble()</code> 更改了 <code>data.frame()</code> 裡面常令使用者感到困惑的一些預設行為。<br><br />
<code>tibble</code> 套件為 <a href="https://www.tidyverse.org">Tidyverse</a> 套件群的一員，目的是為了解決 base R 眾多函數紛亂不一致的問題 (e.g. 命名不一致、預設行為不一致、類似的函數回傳值不一致等)。<a href="#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>這只有使用 <code>tibble</code> 套件的 <code>tibble()</code> 所回傳的 data frame (class 為 <code>tbl_df</code>, <code>tbl</code> 與 <code>data.frame</code>) 才有這種特性。使用 R 的內建函數 <code>data.frame()</code> 所建立的 data frame 或是 R 的內建資料集 (class 只有 <code>data.frame</code>) 則會根據所篩選出之資料的形狀的不同而回傳不同的資料結構 (有可能是 <code>data.frame</code> 或是 <code>vector</code>)<a href="#fnref12" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<!--bookdown:body:end-->
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>RLads Lab</strong>" was written by Yongfu Liao. It was last built on 2021-03-13.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


</body>

</html>
